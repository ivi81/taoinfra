# üîê –¢–∞–±–ª–∏—Ü—ã —Å—Ö–µ–º—ã Auth –≤ Supabase

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ `auth` –≤–∞—à–µ–≥–æ self-hosted Supabase (—Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ GoTrue).

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| **users** | –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –•—Ä–∞–Ω–∏—Ç —è–¥—Ä–æ –ø—Ä–æ—Ñ–∏–ª—è. |
| **identities** | –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (OAuth, SAML, email/password). |
| **sessions** | –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –≤—Ö–æ–¥–∞. |
| **refresh_tokens** | –¢–æ–∫–µ–Ω—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π (JWT refresh tokens). |
| **audit_log_entries** | –ñ—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ –≤—Å–µ—Ö –∑–Ω–∞—á–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. |
| **sso_providers** | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ Single Sign-On (OAuth, SAML). |
| **sso_domains** | –ü—Ä–∏–≤—è–∑–∫–∞ –¥–æ–º–µ–Ω–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º SSO-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º. |
| **saml_providers** | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ SAML 2.0 Identity Provider (IdP) –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –≤—Ö–æ–¥–∞. |
| **saml_relay_states** | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ—Ç–æ–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ SAML. |
| **oauth_clients** | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ OAuth 2.0 / OpenID Connect –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. |
| **oauth_authorizations** | –í—ã–¥–∞–Ω–Ω—ã–µ –∫–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ access tokens –¥–ª—è OAuth-–∫–ª–∏–µ–Ω—Ç–æ–≤. |
| **oauth_consents** | –ó–∞–ø–∏—Å—å —Å–æ–≥–ª–∞—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ OAuth-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. |
| **oauth_client_states** | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è CSRF-–∞—Ç–∞–∫ –≤ OAuth-–ø–æ—Ç–æ–∫–µ. |
| **mfa_factors** | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ñ–∞–∫—Ç–æ—Ä—ã –º–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (TOTP, SMS –∏ —Ç.–¥.). |
| **mfa_challenges** | –ê–∫—Ç–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã (challenges) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ MFA-—Ñ–∞–∫—Ç–æ—Ä–∞. |
| **mfa_amr_claims** | –ó–∞–ø–∏—Å–∏ –æ –º–µ—Ç–æ–¥–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Authentication Method Reference), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Å—Å–∏–∏. |
| **flow_state** | –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è). |
| **one_time_tokens** | –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤—Ä–æ–¥–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email, —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è. |
| **instances** | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ GoTrue (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏). |
| **schema_migrations** | –°–ª—É–∂–µ–±–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. |

---

# üîê CSRF (–ü–æ–¥–º–µ–Ω–∞ –ú–µ–∂—Å–∞–π—Ç–æ–≤—ã—Ö –ó–∞–ø—Ä–æ—Å–æ–≤)

**CSRF (Cross-Site Request Forgery)** ‚Äî —ç—Ç–æ —Ç–∏–ø –∞—Ç–∞–∫–∏ –Ω–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º —Å–∞–π—Ç–µ –±–µ–∑ –≤–µ–¥–æ–º–∞ –∏ —Å–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CSRF-–∞—Ç–∞–∫–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä)

1.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –≤—Ö–æ–¥–∏—Ç –≤ —Å–≤–æ–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ —Å–∞–π—Ç–µ `bank.com`. –°–µ—Å—Å–∏—è (cookie) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–µ.
2.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**, –æ—Å—Ç–∞–≤–∞—è—Å—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ –ø–æ—Å–µ—â–∞–µ—Ç –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π —Å–∞–π—Ç.
3.  **–í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π —Å–∞–π—Ç** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Ñ–æ–Ω–µ —Å–∫—Ä—ã—Ç—É—é —Ñ–æ—Ä–º—É –∏–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ `bank.com` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥).
4.  **–ë—Ä–∞—É–∑–µ—Ä** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ cookie –æ—Ç `bank.com` –∫ —ç—Ç–æ–º—É –∑–∞–ø—Ä–æ—Å—É.
5.  **–°–µ—Ä–≤–µ—Ä `bank.com`** –≤–∏–¥–∏—Ç –≤–∞–ª–∏–¥–Ω—É—é —Å–µ—Å—Å–∏—é –∏ **–≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–∞—Å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ** (–ø–µ—Ä–µ–≤–æ–¥), —Å—á–∏—Ç–∞—è, —á—Ç–æ –∑–∞–ø—Ä–æ—Å —Å–¥–µ–ª–∞–ª —Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.


# üìù –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π —Ç–∞–±–ª–∏—Ü Auth

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û–ø–∏—Å–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Ç–∏–ø–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ GoTrue/Supabase Auth. –î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `\d+ auth."table_name"` –≤ `psql` –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ö–µ–º—É –≤ Studio ‚Üí SQL Editor.

### **–Ø–¥—Ä–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–µ—Å—Å–∏–π**
*   **`auth.users`**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞.
    *   `id` (UUID, PK): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `email`, `phone`: –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤—Ö–æ–¥–∞.
    *   `encrypted_password`: –•–µ—à –ø–∞—Ä–æ–ª—è.
    *   `email_confirmed_at`, `phone_confirmed_at`: –í—Ä–µ–º—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.
    *   `confirmed_at`: –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞.
    *   `last_sign_in_at`: –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞.
    *   `banned_until`: –î–æ –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (—Å—Ç–æ–ª–±–µ—Ü, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ä–∞–Ω–µ–µ –¥–æ–±–∞–≤–ª—è–ª–∏).
    *   `raw_app_meta_data`, `raw_user_meta_data` (JSONB): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   **`auth.sessions`**:
    *   `id` (UUID, PK): –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ—Å—Å–∏–∏.
    *   `user_id` (UUID, FK ‚Üí `users.id`): –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `not_after`: –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Å—Å–∏–∏.
*   **`auth.refresh_tokens`**:
    *   `id` (BIGINT, PK): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–∫–µ–Ω–∞.
    *   `session_id` (UUID, FK ‚Üí `sessions.id`): –°–≤—è–∑–∞–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è.
    *   `token`: –ó–Ω–∞—á–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ refresh-—Ç–æ–∫–µ–Ω–∞ (—Ö–µ—à).
    *   `revoked`: –§–ª–∞–≥ –æ—Ç–∑—ã–≤–∞ —Ç–æ–∫–µ–Ω–∞.

### **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (SSO/OAuth)**
*   **`auth.identities`**:
    *   `id` (TEXT): –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–≥–æ Google ID).
    *   `user_id` (UUID, FK ‚Üí `users.id`): –°–≤—è–∑—å —Å –ª–æ–∫–∞–ª—å–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é.
    *   `provider` (TEXT): –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ('google', 'github', 'email', 'saml' –∏ —Ç.–¥.).
    *   `identity_data` (JSONB): –ü—Ä–æ—Ñ–∏–ª—å, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
*   **`auth.sso_providers`**:
    *   `id` (UUID, PK): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ.
    *   `resource_id` (TEXT): –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ('google', 'saml', 'email' –∏ —Ç.–¥.).
*   **`auth.sso_domains`**:
    *   `sso_provider_id` (UUID, FK ‚Üí `sso_providers.id`): –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
    *   `domain` (TEXT): –î–æ–º–µ–Ω email (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'company.com'), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

### **–ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (MFA)**
*   **`auth.mfa_factors`**:
    *   `id` (UUID, PK): –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞–∫—Ç–æ—Ä–∞.
    *   `user_id` (UUID, FK ‚Üí `users.id`): –í–ª–∞–¥–µ–ª–µ—Ü —Ñ–∞–∫—Ç–æ—Ä–∞.
    *   `status` (TEXT): –°–æ—Å—Ç–æ—è–Ω–∏–µ ('unverified', 'verified').
    *   `factor_type` (TEXT): –¢–∏–ø ('totp', 'phone' –∏ —Ç.–¥.).
    *   `secret`: –°–µ–∫—Ä–µ—Ç –¥–ª—è TOTP –∏–ª–∏ —Ç–æ–∫–µ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤.
*   **`auth.mfa_challenges`**:
    *   `factor_id` (UUID, FK ‚Üí `mfa_factors.id`): –§–∞–∫—Ç–æ—Ä, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω –≤—ã–∑–æ–≤.
    *   `ip_address`: IP, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ—Å—Ç—É–ø–∏–ª –∑–∞–ø—Ä–æ—Å.
    *   `verified_at`: –í—Ä–µ–º—è —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.

### **–ê—É–¥–∏—Ç –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
*   **`auth.audit_log_entries`**:
    *   `id` (UUID, PK): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏.
    *   `payload` (JSONB): –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è (—Ç–∏–ø —Å–æ–±—ã—Ç–∏—è, IP, user_agent, ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
    *   `created_at`: –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**.
*   **`auth.flow_state`**:
    *   `id` (UUID, PK): –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞.
    *   `authentication_method` (TEXT): –ú–µ—Ç–æ–¥ ('password', 'otp', 'oauth').
    *   `code_challenge`, `code_challenge_method`: –î–ª—è PKCE –≤ OAuth.
*   **`auth.one_time_tokens`**:
    *   `user_id` (UUID, FK ‚Üí `users.id`): –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
    *   `token_hash`: –•–µ—à –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.
    *   `token_type` (TEXT): –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ ('recovery', 'invite', 'magiclink', 'email_change').
    *   `relates_to`: –°–≤—è–∑–∞–Ω–Ω—ã–π email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω.